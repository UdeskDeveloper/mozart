{% if title is defined %}
    {{ before_title|raw }}{{ title }}{{ after_title|raw }}
{% endif %}

<div class="property-filter widget filter-horizontal">
    <div class="content">
        <form {% if map_filtering %}
            method="post" action="{{ wp.admin_url( 'admin-ajax.php') }}" class="form-inline map-filtering"
            {% else %}
                method="get" action="{{ im_get_home_url() }}/{{ 'properties'|translate }}/" class="form-inline"
                {% endif %}>
                    <input type='hidden' name='action' value='properties_map_filter' />
                    {% if wp.parameter('property', 'filter_visibility_h', 'hide_type') != 'on' %}
                        <div class="property-types">
                            {% for type in wp.get_terms('property_types') %}
                                <div class="property-type {{ type.slug }} {% if q.filter_type is defined %}
                                     {% for filter_type in q.filter_type %}
                                         {% if filter_type == type.term_id %}active{% endif %}
                                     {% endfor %}
                                     {% endif %}">
                                         <label for="filter_type_{{ type.term_id }}">
                                             <input type="checkbox" name="filter_type[]"
                                                    title="{{ type.name }}" id="filter_type_{{ type.term_id }}"
                                                    class="no-ezmark" value="{{ type.term_id }}"
                                         {% if q.filter_type is defined %}{% for filter_type in q.filter_type %}{% if filter_type == type.term_id %}checked{% endif %}{% endfor %}{% endif %}> {{ type.name }}
                                </label>
                            </div>
                            {% endfor %}
                            </div>
                            <!-- /.property-types -->
                            {% endif %}
                                <div class="general">
                                    {% if wp.parameter('property', 'filter_visibility_h', 'hide_location') != 'on' %}
                                        <select name="filter_location" id="inputLocation" class="location">
                                            <option value="">{{ 'Location'|translate }}</option>
                                            {% for location in wp.get_terms('locations') %}
                                                <option value="{{ location.term_id }}"
                                                        {% if q.filter_location is defined and q.filter_location == location.term_id %}selected="selected"{% endif %}>
                                                    {{ location.name }}
                                                </option>
                                            {% endfor %}
                                        </select>
                                    {% endif %}

                                    {% if wp.parameter('property', 'filter_visibility_h', 'hide_beds') != 'on' %}
                                        <select name="filter_bedrooms" id="inputBeds" class="beds">
                                            <option value="">{{ 'Beds'|translate }}</option>
                                            {% for i in range(1, 10) %}
                                                <option value="{{ i }}" {% if q.filter_bedrooms is defined and q.filter_bedrooms == i %}selected="selected="{% endif %}>{{ i }}</option>
                                            {% endfor %}
                                        </select>
                                    {% endif %}

                                    {% if wp.parameter('property', 'filter_visibility_h', 'hide_baths') != 'on' %}
                                        <select name="filter_bathrooms" id="inputBaths" class="baths">
                                            <option value="">{{ 'Baths'|translate }}</option>
                                            {% for i in range(1, 10) %}
                                                <option value="{{ i }}" {% if q.filter_bathrooms is defined and q.filter_bathrooms == i %}selected="selected="{% endif %}>{{ i }}</option>
                                            {% endfor %}
                                        </select>
                                    {% endif %}

                                    {% if wp.parameter('property', 'filter_visibility_h', 'hide_price_range') != 'on' %}
                                        <div class="price-filter">
                                            <label class="price-filter-label">{{ 'Price range: '|translate }}<span class="from">{{ price_range.min }}</span> - <span class="to">{{ price_range.max }}</span></label>
                                            <input type="text" class="ui-slider price-range" id="inputPriceRange"
                                                   name="filter_price_range"
                                                   value="{% if q.filter_price_range is defined %}[{{q.filter_price_range}}]{% else %}[{{ price_range.min }},{{ price_range.max }}]{% endif %}"
                                                   data-slider-min="{{ price_range.min }}"
                                                   data-slider-max="{{ price_range.max }}"
                                                   data-slider-step="{{ price_range.step }}"
                                                   data-slider-tooltip="hide"
                                                   data-slider-value="{% if q.filter_price_range is defined %}[{{q.filter_price_range}}]{% else %}[{{ price_range.min }},{{ price_range.max }}]{% endif %}" />
                                        </div>
                                    {% endif %}

                                    {% if wp.parameter('property', 'filter', 'hide_area_from', 'on') != 'on' %}
                                        <input type="text" value="{%if q.filter_area_from is defined %}{{q.filter_area_from }}{% endif %}"
                                               name="filter_area_from" id="inputAreaFrom" class='form-control' placeholder="{{ 'Area from'|translate }}">
                                    {% endif %}

                                    {% if wp.parameter('property', 'filter', 'hide_area_to', 'on') != 'on' %}
                                        <input type="text" value="{%if q.filter_area_to is defined %}{{q.filter_area_to }}{% endif %}"
                                               name="filter_area_to" id="inputAreaTo" class='form-control' placeholder="{{ 'Area to'|translate }}">
                                    {% endif %}

                                    <button class="btn btn-secondary">{{ 'Filter now!'|translate }}</button>
                                </div><!-- /.general -->
                            </form>
                        </div>
                        <!-- /.content -->
                    </div><!-- /.property-filter -->
