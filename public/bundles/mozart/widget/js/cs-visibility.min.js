jQuery(function(){var e=jQuery(document),t=function(e,t){var o=jQuery(t).closest(".widget"),f=o.find(".csb-visibility-button"),h=o.find(".widget-control-actions .widget-control-save"),u=o.find(".widget-control-actions .spinner");1!=o.data("_csb_visibility")&&(u.insertBefore(h).css({"float":"left"}),f.insertBefore(h).click(l),o.on("click",".toggle-action b",a),o.on("csb:update",n),o.on("click",".clear-filter",i),o.on("click",".choose-filters",c),o.on("click",".add-filter",s),o.on("change","input[data-lbl-all][data-lbl-single]",r),o.on("change","select.posttype",d),o.data("_csb_visibility",!0))},i=function(e){var t=jQuery(this),i=t.closest(".csb-option-row"),s=t.closest(".widget"),n="."+jQuery.trim(i.attr("class").replace("csb-option-row","")),c=s.find('[data-for="'+n+'"]'),o=i.find("input, select, textarea");return e.preventDefault(),c.show(),i.fadeOut(400,function(){o.val("").trigger("change.select2"),s.trigger("csb:update")}),!1},s=function(e){var t=jQuery(this),i=t.data("for"),s=t.closest(".widget"),n=s.find(".csb-always"),c=s.find(i);return e.preventDefault(),c.show(),t.hide(),n.hide(),o(),s.trigger("csb:update"),!1},n=function(){var e=jQuery(this).closest(".widget"),t=e.find(".csb-always"),i=e.find(".csb-option-row:visible:not(.csb-action,.csb-always)");0==i.length?t.show():(t.hide(),i.find(".csb-and").show(),i.first().find(".csb-and").hide()),wpmUi.upgrade_multiselect(e)},c=function(t){var i=jQuery(this),s=i.closest(".csb-option-row"),n=s.find(".dropdown");return t.preventDefault(),n.show(),e.one("click",o),!1},o=function(){jQuery(".csb-action .dropdown:visible").hide()},l=function(e){var t=jQuery(this),i=t.closest(".widget"),s=i.find(".csb-visibility-inner"),n=s.find(".csb-visible-flag");return e.preventDefault(),"0"==n.val()?(n.val(1),s.show(),i.trigger("csb:update")):(n.val(0),s.hide()),!1},a=function(e){var t=jQuery(this).closest("label"),i=t.closest(".widget"),s="#"+t.attr("for"),n=i.find(s),c=n.val(),o=i.find(".lbl-show-if"),l=i.find(".lbl-hide-if");return e.preventDefault(),"show"!=c?(o.show(),l.hide(),n.val("show")):(o.hide(),l.show(),n.val("hide")),!1},r=function(){var e=jQuery(this).closest("label"),t=e.closest(".csb-detail-row"),i=e.find("input[type=checkbox]"),s=e.find(".lbl"),n=t.find(".detail"),c=n.find("input,select,textarea");i.prop("checked")?(s.text(i.data("lbl-single")),n.show()):(s.text(i.data("lbl-all")),n.hide(),c.val("").trigger("change.select2"))},d=function(){var e,t=jQuery(this),i=t.closest(".csb-option-row"),s=i.find(".csb-detail-row"),n=t.val();if(s.addClass("csb-hide"),n)for(e=0;e<n.length;e+=1)s.filter(".csb-pt-"+n[e]).removeClass("csb-hide ");s.each(function(){var e=jQuery(this),t=e.find("input[type=checkbox]");e.hasClass("csb-hide")?(e.hide(),t.prop("checked",!1),r.call(t)):e.show()})};jQuery("#widgets-right .widget").each(t),e.on("widget-added",t)});