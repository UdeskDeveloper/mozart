jQuery(document).ready(function(a){var b=["1","2","3","4","5","6","7","8","9","10"],c=b.length;a(".cq-stackgallery").each(function(){function n(){j&&(clearInterval(l),l=setInterval(function(){r(null)},k),m=!0,e.data("slideshowint",l))}function p(a){try{e.tooltipster("destroy")}catch(b){}var c=a.attr("title");""!=c&&(e.tooltipster({content:c,delay:200,animation:"grow",position:"top",offsetY:.5*-(e.height()-g),delay:50,theme:"tooltipster-shadow"}),e.tooltipster("show"))}function r(b){j&&clearInterval(e.data("slideshowint"));var c=e.find("img.stackgallery-item").last(),d=e.find("img.stackgallery-item").first(),g=c.prev("img.stackgallery-item");p(g);var k=1;b&&(k=b.pageX-e.offset().left>.5*e.width()?1:-1);var l=c.data("deg");o||(o=!0,g.transition({rotate:0,x:0},300,"linear"),c.transition({rotate:l,x:1.2*k*f},400,h,function(){a(this).transition({x:0,rotate:l},300,i,function(){a(this).insertBefore(d),a(this).removeClass("back"),o=!1,n()}).addClass("back")}))}function s(b){j&&clearInterval(e.data("slideshowint")),b&&(b.stopPropagation(),b.preventDefault());var c=e.find("img.stackgallery-item").last(),d=e.find("img.stackgallery-item").first(),g=c.prev("img.stackgallery-item"),k=-1,l=c.data("deg");o||(o=!0,g.transition({rotate:l,x:0},300,"linear"),d.transition({rotate:l,x:1.2*k*f},300,h,function(){a(this).addClass("front").transition({x:0,rotate:0},300,i,function(){a(this).insertAfter(c),a(this).removeClass("front"),p(d),o=!1,n()})}))}var e=a(this),f=a(this).data("width"),g=a(this).data("height"),h=a(this).data("easein"),i=a(this).data("easeout"),j="yes"==a(this).data("slideshow")?!0:!1,k=a(this).data("slideshowdelay")||5e3;a(this).css({height:e.data("containerheight")||g+80}),a(this).find(".stackgallery-next").parent("a").on("click",function(a){r(),a.stopPropagation(),a.preventDefault()});var l,m=!1;n(),a(this).find(".stackgallery-prev").parent("a").on("click",s),a(this).find("img.stackgallery-item").each(function(){var e=2*Math.floor(2*Math.random())-1,h=(e*b[Math.floor(Math.random()*c)]).toString();a(this).css({width:f,height:g,top:"50%",left:"50%",opacity:"1","margin-top":.5*-g,"margin-left":.5*-f,"-moz-transform":"rotate("+h+"deg)","-ms-transform":"rotate("+h+"deg)","-webkit-transform":"rotate("+h+"deg)",transform:"rotate("+h+"deg)"}).data("deg",h)});var o=!1,q=a(this).find("img.stackgallery-item").last();q.transition({rotate:0,x:0},300,"linear"),p(q),a(this).on("click",function(a){var b=a.pageX-e.offset().left>.5*e.width()?1:-1;b>0?r(a):s(a)}).on("mouseover",function(){j&&clearInterval(e.data("slideshowint")),m=!1}).on("mouseleave",function(){n()});var t=g/f;a(window).on("resize",function(){e.width()<=320?(e.find(".stackgallery-next").parent("a").parent("div").hide(),e.find(".stackgallery-prev").parent("a").parent("div").hide()):(e.find(".stackgallery-next").parent("a").parent("div").show(),e.find(".stackgallery-prev").parent("a").parent("div").show()),e.find("img.stackgallery-item").each(function(){var c=a(this).width(),d=c*t;a(this).css({height:d,"margin-left":.5*-c,"margin-top":.5*-d})})}),a(window).trigger("resize")})});